% view.layout = 'default';
% ctx.stash.title = "Recipes List"
<div style="display: flex; width: 100%; gap: 2rem; align-items: flex-start;">
  <!-- 左侧动画和标题 -->
  <div style="flex: 1; min-width: 260px; max-width: 33%; display: flex; flex-direction: row; align-items: flex-start;">
    <div class="wrapper" style="width: 100%; display: flex; align-items: center; justify-content: center; min-height: 120px;">
      <svg style="width: 100%; height: 120px;">
        <text x="50%" y="50%" dy=".35em" text-anchor="middle" style="font-family: 'Russo One', 'Courier New', Courier, monospace; font-size: 48px; fill: #365FA0;">Bla + Bla</text>
      </svg>
    </div>
    <div style="padding-left: 0.5rem; width: 100%;">
      <h1 style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 2.5rem; margin: 0; color: #2d2d2d; letter-spacing: 2px;">BlaBites</h1>
      <h3 style="font-family: 'Caveat', 'Comic Sans MS', cursive; font-size: 1.2rem; margin: 0.5rem 0 1.2rem 0; color: #365FA0; font-weight: normal;">come join to share recipes & make friends</h3>
    </div>
  </div>
 
</div>
<!-- Recipes of The Month & Recent Recipes in one row -->
<div style="display: flex; width: 100%; gap: 2.5rem; align-items: flex-start; margin-top: 2rem;">
  <!-- Recipes of The Month -->
  <div style="flex: 1; min-width: 260px; max-width: 33%; display: flex; flex-direction: column;">
    <h2 style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 1.3rem; margin-bottom: 0.7rem; color: #2d2d2d;">Recipes of The Month</h2>
    % const top3 = ctx.stash.recipes.slice(0, 3);
    <div style="width: 100%; display: flex; flex-direction: column; gap: 0.7rem;">
      <!-- Top1 -->
      % if (top3[0]) {
        <div style="border: 2px solid #365FA0; border-radius: 16px; padding: 1rem; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 8px #0001; background: #fff;">
          <div style="font-size: 1.2rem; font-weight: bold; color: #365FA0; margin-bottom: 0.7rem; font-family: 'Russo One', 'Arial Black', sans-serif;">
            Top1: <%= top3[0].title %>
          </div>
          <a href="/recipes/<%= top3[0].recipe_id %>" target="_blank" style="display: block; width: 120px; height: 120px; border-radius: 12px; overflow: hidden;">
            <img src="/public/Screenshot_20250605_110810.jpg" alt="Recipe <%= top3[0].title %>" style="width: 100%; height: 100%; object-fit: cover;" />
          </a>
        </div>
      % }
      <!-- Top2 & Top3 -->
      <div style="display: flex; gap: 1rem; margin-top: 0.2rem;">
        % if (top3[1]) {
          <div style="display: flex; flex-direction: column; align-items: center;">
            <a href="/recipes/<%= top3[1].recipe_id %>" target="_blank" style="display: block; width: 70px; height: 70px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px #0001;">
              <img src="/public/Screenshot_20250605_110810.jpg" alt="Recipe <%= top3[1].title %>" style="width: 100%; height: 100%; object-fit: cover;" />
            </a>
            <span style="font-size: 0.95rem; color: #365FA0; font-weight: bold;">Top 2</span>
          </div>
        % }
        % if (top3[2]) {
          <div style="display: flex; flex-direction: column; align-items: center;">
            <a href="/recipes/<%= top3[2].recipe_id %>" target="_blank" style="display: block; width: 70px; height: 70px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px #0001;">
              <img src="/public/Screenshot_20250605_110810.jpg" alt="Recipe <%= top3[2].title %>" style="width: 100%; height: 100%; object-fit: cover;" />
            </a>
            <span style="font-size: 0.95rem; color: #365FA0; font-weight: bold;">Top 3</span>
          </div>
        % }
      </div>
    </div>
  </div>
  <!-- Recent recipes -->
  <div style="flex: 2; min-width: 320px; display: flex; flex-direction: column; align-items: flex-start; height: 100%;">
    <h2 style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 1.3rem; margin-bottom: 0.7rem; color: #2d2d2d;">Recent recipes</h2>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(2, 1fr); gap: 1.2rem; height: 220px; align-items: center;">
      % const recent6 = ctx.stash.recipes.slice(0, 6);
      % for (const recipe of recent6) {
        <a href="/recipes/<%= recipe.recipe_id %>" target="_blank" style="display: block; width: 100%; height: 100px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px #0001;">
          <img src="/public/Screenshot_20250605_110810.jpg" alt="Recipe <%= recipe.title %>" style="width: 100%; height: 100%; object-fit: cover;" />
        </a>
      % }
    </div>
  </div>
</div>
