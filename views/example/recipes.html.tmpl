% view.layout = 'default';
% ctx.stash.title = "Recipes List"
<div style="display: flex; width: 100%; gap: 2rem; align-items: flex-start;">
  <!-- 左侧动画和标题 -->
  <div style="flex: 1; min-width: 260px; max-width: 33%; display: flex; flex-direction: row; align-items: flex-start;">
    <div class="wrapper" style="width: 100%; display: flex; align-items: center; justify-content: center; min-height: 120px;">
      <svg style="width: 100%; height: 120px;">
        <text x="50%" y="50%" dy=".35em" text-anchor="middle" style="font-family: 'Russo One', 'Courier New', Courier, monospace; font-size: 48px; fill: #365FA0;">Bla + Bla</text>
      </svg>
    </div>
    <div style="padding-left: 0.5rem; width: 100%;">
      <h1 style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 2.5rem; margin: 0; color: #2d2d2d; letter-spacing: 2px;">BlaBites</h1>
      <h3 style="font-family: 'Caveat', 'Comic Sans MS', cursive; font-size: 1.2rem; margin: 0.5rem 0 1.2rem 0; color: #365FA0; font-weight: normal;">come join to share recipes & make friends</h3>
    </div>
  </div>
</div>
<!-- Recipes of The Month & Recent Recipes in one row -->
<div style="display: flex; width: 100%; gap: 2.5rem; align-items: flex-start; margin-top: 2rem;">
  <!-- Recipes of The Month -->
  <div style="flex: 1; min-width: 260px; max-width: 33%; display: flex; flex-direction: column;">
    <h2 style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 1.3rem; margin-bottom: 0.7rem; color: #2d2d2d;">Recipes of The Month</h2>
    % const top3 = ctx.stash.recipes.slice(0, 3);
    <div style="width: 100%; display: flex; flex-direction: column; gap: 0.7rem;">
      <!-- Top1 -->
      % if (top3[0]) {
        <div style="border: 2px solid #365FA0; border-radius: 16px; padding: 1rem; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 8px #0001; background: #fff;">
          <div style="font-size: 1.2rem; font-weight: bold; color: #365FA0; margin-bottom: 0.7rem; font-family: 'Russo One', 'Arial Black', sans-serif;">
            Top1: <%= top3[0].title %>
          </div>
          <a href="/recipes/<%= top3[0].recipe_id %>" target="_blank" style="display: block; width: 120px; height: 120px; border-radius: 12px; overflow: hidden;">
            <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="10" y="10" width="100" height="100" rx="18" fill="#E3ECF7" stroke="#365FA0" stroke-width="3"/>
              <circle cx="60" cy="55" r="28" fill="#B6D0F7" stroke="#365FA0" stroke-width="2"/>
              <rect x="40" y="80" width="40" height="12" rx="6" fill="#365FA0" opacity="0.7"/>
              <text x="60" y="60" text-anchor="middle" dy=".35em" font-size="18" fill="#365FA0" font-family="Arial, sans-serif">菜谱</text>
            </svg>
          </a>
        </div>
      % }
      <!-- Top2 & Top3 -->
      <div style="display: flex; gap: 1rem; margin-top: 0.2rem;">
        % if (top3[1]) {
          <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 1.2rem; font-weight: bold; color: #365FA0; margin-bottom: 0.7rem; font-family: 'Russo One', 'Arial Black', sans-serif;">
            Top2: <%= top3[1].title %>
          </div>
            <a href="/recipes/<%= top3[1].recipe_id %>" target="_blank" style="display: block; width: 70px; height: 70px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px #0001;">
              <svg width="70" height="70" viewBox="0 0 70 70" xmlns="http://www.w3.org/2000/svg">
                <rect x="5" y="5" width="60" height="60" rx="10" fill="#E3ECF7" stroke="#365FA0" stroke-width="2"/>
                <circle cx="35" cy="32" r="16" fill="#B6D0F7" stroke="#365FA0" stroke-width="1.5"/>
                <rect x="23" y="47" width="24" height="7" rx="3.5" fill="#365FA0" opacity="0.7"/>
                <text x="35" y="35" text-anchor="middle" dy=".35em" font-size="10" fill="#365FA0" font-family="Arial, sans-serif"><%= top3[1].title %></text>
              </svg>
            </a>
          </div>
        % }
        % if (top3[2]) {
          <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 1.2rem; font-weight: bold; color: #365FA0; margin-bottom: 0.7rem; font-family: 'Russo One', 'Arial Black', sans-serif;">
            Top3: <%= top3[2].title %>
          </div>
            <a href="/recipes/<%= top3[2].recipe_id %>" target="_blank" style="display: block; width: 70px; height: 70px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px #0001;">
              <svg width="70" height="70" viewBox="0 0 70 70" xmlns="http://www.w3.org/2000/svg">
                <rect x="5" y="5" width="60" height="60" rx="10" fill="#E3ECF7" stroke="#365FA0" stroke-width="2"/>
                <circle cx="35" cy="32" r="16" fill="#B6D0F7" stroke="#365FA0" stroke-width="1.5"/>
                <rect x="23" y="47" width="24" height="7" rx="3.5" fill="#365FA0" opacity="0.7"/>
                <text x="35" y="35" text-anchor="middle" dy=".35em" font-size="10" fill="#365FA0" font-family="Arial, sans-serif"><%= top3[2].title %></text>
              </svg>
            </a>
          </div>
        % }
      </div>
    </div>
  </div>
  <!-- Recent recipes -->
  <div style="flex: 2; min-width: 320px; display: flex; flex-direction: column; align-items: flex-start; height: 100%;">
    <h2 style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 1.3rem; margin-bottom: 0.7rem; color: #2d2d2d;">Recent recipes</h2>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(2, 1fr); gap: 1.2rem; height: 220px; align-items: center;">
      % const recent6 = ctx.stash.recipes.slice(0, 6);
      % for (const recipe of recent6) {
        <a href="/recipes/<%= recipe.recipe_id %>" target="_blank" style="display: block; width: 100%; height: 100px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px #0001;">
          <svg width="100%" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="5" y="5" width="90" height="90" rx="12" fill="#E3ECF7" stroke="#365FA0" stroke-width="2"/>
            <circle cx="50" cy="45" r="20" fill="#B6D0F7" stroke="#365FA0" stroke-width="1.5"/>
            <rect x="35" y="70" width="30" height="8" rx="4" fill="#365FA0" opacity="0.7"/>
            <text x="50" y="48" text-anchor="middle" dy=".35em" font-size="12" fill="#365FA0" font-family="Arial, sans-serif"><%= recipe.title %></text>
          </svg>
        </a>
      % }
    </div>
  </div>
</div>
